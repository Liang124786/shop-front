import{p as F,v as X,s as h,c as m,d as G,w as N,o as O,b as Z,g as W,r as K,y as R,u as Q,A as ee,E as Y,J as te,e as ae,S as b,U as L,k as le,n as oe,a4 as ne,a5 as se,a6 as re,a7 as ie,a8 as ue,a9 as ce,aa as de,ab as ve,F as me,G as ge,I as fe,ac as he,N as be,ad as Se,R as $,ae as ye,af as we,ag as pe,ah as Be,Z as ke,ai as Ve,_ as E,$ as V,Y as D,aj as He,a0 as Te,a1 as p,ak as x,al as U,am as z,a3 as Ce,an as q,ao as Pe,a2 as M,ap as Ne}from"./index-C-Wof5fh.js";import{m as xe,V as J,a as Le,b as _e}from"./VToolbar-D1bM2oW_.js";import{u as Ie}from"./ssrBoot-DksyFfg0.js";import{V as Ae}from"./VMain-CroaMqrK.js";import{V as Re}from"./VContainer-Dvv4KtVd.js";const Ee=F({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function De(e){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o,layoutSize:v}=d;let r=0,a=0;const i=X(null),l=h(0),c=h(0),u=h(0),B=h(!1),s=h(!1),S=h(!1),y=h(!1),w=h(!0),g=m(()=>Number(e.scrollThreshold)),_=m(()=>G((g.value-l.value)/g.value||0));function C(n){const t="window"in n?window.innerHeight:n.clientHeight,f="window"in n?document.documentElement.scrollHeight:n.scrollHeight;return{clientHeight:t,scrollHeight:f}}function H(){const n=i.value;if(!n)return;const{clientHeight:t,scrollHeight:f}=C(n),I=f-t,T=v?.value||0,A=g.value+T;w.value=I>A}function P(){H()}function k(){const n=i.value;if(!n||o&&!o.value)return;r=l.value,l.value="window"in n?n.pageYOffset:n.scrollTop;const t=n instanceof Window?document.documentElement.scrollHeight:n.scrollHeight;a!==t&&(t>a&&H(),a=t),s.value=l.value<r,u.value=Math.abs(l.value-g.value);const{clientHeight:f,scrollHeight:I}=C(n),T=l.value+f>=I-5;!s.value&&T&&l.value>=g.value&&w.value&&(y.value=!0);const A=Math.abs(l.value-r)>100,j=l.value<=5;(s.value&&r-l.value>1&&!T||A&&l.value<g.value||j)&&(y.value=!1),S.value=T}return N(s,()=>{c.value=c.value||l.value}),N(B,()=>{c.value=0}),O(()=>{N(()=>e.scrollTarget,n=>{const t=n?document.querySelector(n):window;t&&t!==i.value&&(i.value?.removeEventListener("scroll",k),i.value=t,i.value.addEventListener("scroll",k,{passive:!0}),Promise.resolve().then(()=>{H()}))},{immediate:!0}),window.addEventListener("resize",P,{passive:!0})}),Z(()=>{i.value?.removeEventListener("scroll",k),window.removeEventListener("resize",P)}),o&&N(o,k,{immediate:!0}),{scrollThreshold:g,currentScroll:l,currentThreshold:u,isScrollActive:B,scrollRatio:_,isScrollingUp:s,savedScroll:c,isAtBottom:S,reachedBottomWhileScrollingDown:y,hasEnoughScrollableSpace:w}}const Ue=F({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...xe(),...te(),...Ee(),height:{type:[Number,String],default:64}},"VAppBar"),ze=W()({name:"VAppBar",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:o}=d;const v=X(),r=K(e,"modelValue"),a=m(()=>{const t=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:t.has("hide"),fullyHide:t.has("fully-hide"),inverted:t.has("inverted"),collapse:t.has("collapse"),elevate:t.has("elevate"),fadeImage:t.has("fade-image")}}),i=m(()=>{const t=a.value;return t.hide||t.fullyHide||t.inverted||t.collapse||t.elevate||t.fadeImage||!r.value}),l=m(()=>{const t=v.value?.contentHeight??0,f=v.value?.extensionHeight??0;return t+f}),{currentScroll:c,scrollThreshold:u,isScrollingUp:B,scrollRatio:s,isAtBottom:S,reachedBottomWhileScrollingDown:y,hasEnoughScrollableSpace:w}=De(e,{canScroll:i,layoutSize:l}),g=R(()=>a.value.hide||a.value.fullyHide),_=m(()=>e.collapse||a.value.collapse&&(a.value.inverted?s.value>0:s.value===0)),C=m(()=>e.flat||a.value.fullyHide&&!r.value||a.value.elevate&&(a.value.inverted?c.value>0:c.value===0)),H=m(()=>a.value.fadeImage?a.value.inverted?1-s.value:s.value:void 0),P=m(()=>{if(a.value.hide&&a.value.inverted)return 0;const t=v.value?.contentHeight??0,f=v.value?.extensionHeight??0;return g.value?c.value<u.value||a.value.fullyHide?t+f:t:t+f});Q(()=>!!e.scrollBehavior,()=>{ae(()=>{if(!g.value){r.value=!0;return}if(a.value.inverted){r.value=c.value>u.value;return}if(!w.value){r.value=!0;return}if(y.value){r.value=!1;return}r.value=B.value&&!S.value||c.value<u.value})});const{ssrBootStyles:k}=Ie(),{layoutItemStyles:n}=ee({id:e.name,order:m(()=>parseInt(e.order,10)),position:R(()=>e.location),layoutSize:P,elementSize:h(void 0),active:r,absolute:R(()=>e.absolute)});return Y(()=>{const t=J.filterProps(e);return b(J,L({ref:v,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...n.value,"--v-toolbar-image-opacity":H.value,height:void 0,...k.value},e.style]},t,{collapse:_.value,flat:C.value}),o)}),{}}}),Me=W()({name:"VAppBarTitle",props:Le(),setup(e,d){let{slots:o}=d;return Y(()=>b(_e,L(e,{class:"v-app-bar-title"}),o)),{}}}),Fe=F({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Se,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...be(),...he({location:"top end"}),...fe(),...ge(),...me(),...ve({transition:"scale-rotate-transition"}),...de()},"VBadge"),We=W()({name:"VBadge",inheritAttrs:!1,props:Fe(),setup(e,d){const{backgroundColorClasses:o,backgroundColorStyles:v}=le(()=>e.color),{roundedClasses:r}=oe(e),{t:a}=ne(),{textColorClasses:i,textColorStyles:l}=se(()=>e.textColor),{themeClasses:c}=re(),{locationStyles:u}=ie(e,!0,s=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(s)?Number(e.offsetY??0):["left","right"].includes(s)?Number(e.offsetX??0):0)),{dimensionStyles:B}=ue(e);return Y(()=>{const s=Number(e.content),S=!e.max||isNaN(s)?e.content:s<=Number(e.max)?s:`${e.max}+`,[y,w]=ce(d.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return b(e.tag,L({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},w,{style:e.style}),{default:()=>[$("div",{class:"v-badge__wrapper"},[d.slots.default?.(),b(ye,{transition:e.transition},{default:()=>[we($("span",L({class:["v-badge__badge",c.value,o.value,r.value,i.value],style:[v.value,l.value,B.value,e.inline?{}:u.value],"aria-atomic":"true","aria-label":a(e.label,s),"aria-live":"polite",role:"status"},y),[e.dot?void 0:d.slots.badge?d.slots.badge?.():e.icon?b(Be,{icon:e.icon},null):S]),[[pe,e.modelValue]])]})])]})}),{}}}),Ge={__name:"default",setup(e){const d=He(),o=ke(),v=Ve(),r=m(()=>[{title:"首頁",to:"/",icon:"mdi-home",show:!0},{title:"註冊",to:"/register",icon:"mdi-account-plus",show:!o.isLoggedIn},{title:"登入",to:"/login",icon:"mdi-login",show:!o.isLoggedIn},{title:"購物車",to:"/cart",icon:"mdi-cart",show:o.isLoggedIn},{title:"訂單",to:"/orders",icon:"mdi-invoice-list",show:o.isLoggedIn},{title:"管理",to:"/admin",icon:"mdi-cog",show:o.isLoggedIn&&o.isAdmin}]),a=async()=>{try{await Ne.logout()}catch(i){console.log(i)}o.logout(),d.push("/"),v({text:"登出成功",snackbarProps:{color:"green"}})};return(i,l)=>{const c=Te("router-view");return p(),E(D,null,[b(ze,null,{default:V(()=>[b(Re,{class:"d-flex align-center"},{default:V(()=>[b(Me,null,{default:V(()=>[...l[0]||(l[0]=[z("購物網站",-1)])]),_:1}),(p(!0),E(D,null,Ce(r.value,u=>(p(),E(D,{key:u.to},[u.show?(p(),x(q,{key:0,"prepend-icon":u.icon,to:u.to},{default:V(()=>[z(Pe(u.title)+" ",1),u.to==="/cart"&&M(o).cart>0?(p(),x(We,{key:0,color:"red",content:M(o).cart,floating:""},null,8,["content"])):U("",!0)]),_:2},1032,["prepend-icon","to"])):U("",!0)],64))),128)),M(o).isLoggedIn?(p(),x(q,{key:0,"prepend-icon":"mdi-logout",onClick:a},{default:V(()=>[...l[1]||(l[1]=[z("登出",-1)])]),_:1})):U("",!0)]),_:1})]),_:1}),b(Ae,null,{default:V(()=>[(p(),x(c,{key:i.$route.fullPath}))]),_:1})],64)}}};export{Ge as default};
