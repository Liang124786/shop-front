import{ai as h,aj as w,Z as S,ap as k,ak as _,a1 as y,$ as o,S as s,R as B,aT as A,a2 as a,aB as m,an as F,am as U}from"./index-C-Wof5fh.js";import{v as c}from"./index-DmZn0ruv.js";import{c as C,b as d,u as M,e as p,V as N}from"./index.esm-CFIa1j0f.js";import{V as R,a as V,b as f}from"./route-block-CDH56o19.js";import{V as T}from"./VDivider-DMSXzlXu.js";import{V as $}from"./VContainer-Dvv4KtVd.js";const q={__name:"login",setup(P){const u=h(),g=w(),v=S(),b=C({account:d().required("帳號必填").min(4,"帳號最少 4 個字").max(20,"帳號最多 20 個字").test("isAlphanumeric","帳號只能是英數字",t=>c.isAlphanumeric(t)),password:d().required("密碼必填").min(4,"密碼最少 4 個字").max(20,"密碼最多 20 個字").test("isAscii","密碼只能是英數字",t=>c.isAscii(t))}),l=M({validationSchema:b,initialValues:{account:"",password:""}}),n=p("account"),i=p("password"),x=l.handleSubmit(async t=>{try{const{data:e}=await k.login(t);v.login(e.result),u({text:"登入成功",snackbarProps:{color:"green"}}),g.push("/")}catch(e){console.log(e);const r=e?.response?.data?.message||"發生錯誤";u({text:r,snackbarProps:{color:"red"}})}});return(t,e)=>(y(),_($,null,{default:o(()=>[s(R,null,{default:o(()=>[s(V,{cols:"12"},{default:o(()=>[...e[2]||(e[2]=[B("h1",{class:"text-center"},"登入",-1)])]),_:1}),s(T),s(V,{cols:"12"},{default:o(()=>[s(N,{disabled:a(l).isSubmitting.value,onSubmit:A(a(x),["prevent"])},{default:o(()=>[s(m,{modelValue:a(n).value.value,"onUpdate:modelValue":e[0]||(e[0]=r=>a(n).value.value=r),counter:"","error-messages":a(n).errorMessage.value,hint:"長度 4 ~ 20 的英數字",label:"帳號",maxlength:"20",minlength:"4"},null,8,["modelValue","error-messages"]),s(m,{modelValue:a(i).value.value,"onUpdate:modelValue":e[1]||(e[1]=r=>a(i).value.value=r),counter:"","error-messages":a(i).errorMessage.value,hint:"長度 4 ~ 20 的英數字",label:"密碼",maxlength:"20",minlength:"4",type:"password"},null,8,["modelValue","error-messages"]),s(F,{loading:a(l).isSubmitting.value,type:"submit"},{default:o(()=>[...e[3]||(e[3]=[U("登入",-1)])]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof f=="function"&&f(q);export{q as default};
