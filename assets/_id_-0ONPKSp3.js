import{bY as _,aj as b,ai as k,Z as x,v as p,_ as w,a1 as P,S as t,$ as s,R as o,ao as l,V as h,an as m,am as f,bw as C,Y as U,ap as B}from"./index-C-Wof5fh.js";import{s as I}from"./product-8O1O2EAa.js";import{V as N,a as n,b as v}from"./route-block-CDH56o19.js";import{V as R}from"./VDivider-DMSXzlXu.js";import{V as S}from"./VNumberInput-BLFc89rT.js";import{V as j}from"./VContainer-Dvv4KtVd.js";const q={class:"text-center"},D={style:{"white-space":"pre"}},Y={__name:"[id]",setup($){const g=_(),i=b(),c=k(),d=x(),r=p({name:"",price:0,description:"",category:"",sell:!0,imageUrl:""});(async()=>{try{const{data:a}=await I.getId(g.params.id);r.value=a.result,document.title=`購物網站 | ${r.value.name}`}catch(a){console.log(a);const e=a?.response?.data?.message||"發生錯誤";c({text:e,snackbarProps:{color:"red"}}),i.push("/")}})();const u=p(1),V=async()=>{try{if(!d.isLoggedIn){i.push("/login");return}const{data:a}=await B.cart({product:r.value.id,quantity:u.value,replace:!1});d.cart=a.result,c({text:"加入購物車成功",snackbarProps:{color:"green"}})}catch(a){console.log(a);const e=a?.response?.data?.message||"發生錯誤";c({text:e,snackbarProps:{color:"red"}})}};return(a,e)=>(P(),w(U,null,[t(j,null,{default:s(()=>[t(N,null,{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[o("h1",q,l(r.value.name),1),t(R),t(n,{cols:"12"},{default:s(()=>[t(h,{contain:"",height:"400",src:r.value.imageUrl},null,8,["src"])]),_:1}),t(n,{cols:"12"},{default:s(()=>[t(S,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=y=>u.value=y),"control-variant":"split",min:1},null,8,["modelValue"]),t(m,{block:"",color:"primary","prepend-icon":"mdi-cart",variant:"outlined",onClick:V},{default:s(()=>[...e[1]||(e[1]=[f(" 加入購物車 ",-1)])]),_:1})]),_:1}),t(n,{class:"text-center",cols:"12"},{default:s(()=>[o("p",null,"分類: "+l(r.value.category),1),o("p",null,"價格: "+l(r.value.price),1),o("p",D,l(r.value.description),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(C,{class:"align-center justify-center text-center","model-value":!r.value.sell,opacity:"0.7",persistent:"",scrim:"black"},{default:s(()=>[e[3]||(e[3]=o("h1",null,"已下架",-1)),t(m,{to:"/"},{default:s(()=>[...e[2]||(e[2]=[f("回首頁",-1)])]),_:1})]),_:1},8,["model-value"])],64))}};typeof v=="function"&&v(Y);export{Y as default};
