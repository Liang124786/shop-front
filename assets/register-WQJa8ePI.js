import{ai as x,aj as h,ap as S,ak as k,a1 as y,$ as t,S as s,R as A,aT as P,a2 as a,aB as m,an as B,am as F}from"./index-C-Wof5fh.js";import{v as d}from"./index-DmZn0ruv.js";import{c as M,b as c,f as U,u as _,e as p,V as $}from"./index.esm-CFIa1j0f.js";import{V as q,a as g,b as V}from"./route-block-CDH56o19.js";import{V as C}from"./VDivider-DMSXzlXu.js";import{V as N}from"./VContainer-Dvv4KtVd.js";const R={__name:"register",setup(T){const f=x(),v=h(),b=M({account:c().required("帳號必填").min(4,"帳號最少 4 個字").max(20,"帳號最多 20 個字").test("isAlphanumeric","帳號只能是英數字",r=>d.isAlphanumeric(r)),password:c().required("密碼必填").min(4,"密碼最少 4 個字").max(20,"密碼最多 20 個字").test("isAscii","密碼只能是英數字",r=>d.isAscii(r)),confirmPassword:c().required("密碼必填").min(4,"密碼最少 4 個字").max(20,"密碼最多 20 個字").test("isAscii","密碼只能是英數字",r=>d.isAscii(r)).oneOf([U("password")],"密碼不一致")}),l=_({validationSchema:b,initialValues:{account:"",password:"",confirmPassword:""}}),n=p("account"),i=p("password"),u=p("confirmPassword"),w=l.handleSubmit(async r=>{try{await S.create(r),f({text:"註冊成功",snackbarProps:{color:"green"}}),v.push("/login")}catch(e){console.log(e);const o=e?.response?.data?.message||"發生錯誤";f({text:o,snackbarProps:{color:"red"}})}});return(r,e)=>(y(),k(N,null,{default:t(()=>[s(q,null,{default:t(()=>[s(g,{cols:"12"},{default:t(()=>[...e[3]||(e[3]=[A("h1",{class:"text-center"},"註冊",-1)])]),_:1}),s(C),s(g,{cols:"12"},{default:t(()=>[s($,{disabled:a(l).isSubmitting.value,onSubmit:P(a(w),["prevent"])},{default:t(()=>[s(m,{modelValue:a(n).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(n).value.value=o),counter:"","error-messages":a(n).errorMessage.value,hint:"長度 4 ~ 20 的英數字",label:"帳號",maxlength:"20",minlength:"4"},null,8,["modelValue","error-messages"]),s(m,{modelValue:a(i).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a(i).value.value=o),counter:"","error-messages":a(i).errorMessage.value,hint:"長度 4 ~ 20 的英數字",label:"密碼",maxlength:"20",minlength:"4",type:"password"},null,8,["modelValue","error-messages"]),s(m,{modelValue:a(u).value.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a(u).value.value=o),counter:"","error-messages":a(u).errorMessage.value,hint:"長度 4 ~ 20 的英數字",label:"確認密碼",maxlength:"20",minlength:"4",type:"password"},null,8,["modelValue","error-messages"]),s(B,{loading:a(l).isSubmitting.value,type:"submit"},{default:t(()=>[...e[4]||(e[4]=[F("註冊",-1)])]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof V=="function"&&V(R);export{R as default};
